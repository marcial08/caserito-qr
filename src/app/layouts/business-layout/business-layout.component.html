<div class="business-layout">
  <header class="mobile-top-bar" *ngIf="isMobile">
    <button class="btn-icon" (click)="toggleSidebar()">
      <i class="fa fa-bars"></i>
    </button>
    <div class="brand-name">
      <i class="fa fa-qrcode text-primary"></i>
      <span>MenuQR</span>
    </div>
    <div class="user-avatar-small">{{ currentUser?.name?.charAt(0) }}</div>
  </header>

  <aside class="sidebar" 
    [class.mobile-open]="mobileMenuOpen && isMobile"
    [class.collapsed]="sidebarCollapsed && !isMobile">
    
    <div class="sidebar-header">
      <div class="logo-wrapper">
        <i class="fa fa-qrcode logo-icon"></i>
        <span class="logo-text" *ngIf="!sidebarCollapsed || isMobile">MenuQR Pro</span>
      </div>
      <button class="btn-close-menu" (click)="closeMobileMenu()" *ngIf="isMobile">
        <i class="fa fa-times"></i>
      </button>
    </div>

    <nav class="sidebar-nav">
      <a *ngFor="let item of menuItems" 
         [routerLink]="item.path" 
         routerLinkActive="active"
         (click)="isMobile && closeMobileMenu()"
         class="nav-item">
        <i [class]="item.icon"></i>
        <span class="nav-label" *ngIf="!sidebarCollapsed || isMobile">{{ item.label }}</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="user-profile">
        <div class="avatar">{{ currentUser?.name?.charAt(0) }}</div>
        <div class="info" *ngIf="!sidebarCollapsed || isMobile">
          <p class="name">{{ currentUser?.name }}</p>
          <p class="plan">{{ currentPlan }}</p>
        </div>
        <button class="btn-logout" (click)="logout()" *ngIf="!sidebarCollapsed || isMobile">
          <i class="fa fa-sign-out"></i>
        </button>
      </div>
    </div>
  </aside>

  <div class="sidebar-overlay" *ngIf="isMobile && mobileMenuOpen" (click)="closeMobileMenu()"></div>

  <main class="main-wrapper" [class.full-width]="sidebarCollapsed && !isMobile">
    <header class="desktop-top-bar" *ngIf="!isMobile">
      <div class="left-section">
        <button class="btn-collapse" (click)="toggleSidebar()">
          <i class="fa" [ngClass]="sidebarCollapsed ? 'fa-indent' : 'fa-dedent'"></i>
        </button>
        <h1 class="page-title">{{ pageTitle }}</h1>
      </div>

      <div class="right-section">
        <div class="business-pill">
          <span class="dot"></span>
          {{ currentBusiness?.name }}
        </div>
        <button class="btn-icon-light"><i class="fa fa-bell"></i></button>
      </div>
    </header>

    <div class="content-container">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>